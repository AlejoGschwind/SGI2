import React from 'react';
import { Link } from 'react-router-dom';
import { connect } from 'react-redux';
import {ReactComponent as Logo} from '../../assets/logo-white.svg';

import './header.styles.scss';
import withLoading from '../../HOCs/withLoading';

const Header = ({children, currentUser}) => {
  // let displayName;
  // if (currentUser) {
  //   const words = currentUser.displayName.split(' ');

  //   displayName = `${words[0]}`
  // }

  return (
  <div className='header'>
    <div className="top-header">
      <Link to='/'>
        <div className='menu-btn'>
          {/* <svg width="27" height="22" viewBox="0 0 27 22" fill="none" xmlns="http://www.w3.org/2000/svg">
            <line y1="1" x2="20" y2="1" stroke="white" strokeWidth="2"/>
            <line y1="10" x2="27" y2="10" stroke="white" strokeWidth="2"/>
            <line x1="7" y1="19" x2="27" y2="19" stroke="white" strokeWidth="2"/>
          </svg> */}
          {/* <svg width="356" height="168" viewBox="0 0 356 168" fill="none" xmlns="http://www.w3.org/2000/svg">
            <path d="M211.078 69.9688C211.078 76.1562 208.844 81.0312 204.375 84.5938C199.938 88.1562 193.75 89.9375 185.812 89.9375C178.5 89.9375 172.031 88.5625 166.406 85.8125V72.3125C171.031 74.375 174.938 75.8281 178.125 76.6719C181.344 77.5156 184.281 77.9375 186.938 77.9375C190.125 77.9375 192.562 77.3281 194.25 76.1094C195.969 74.8906 196.828 73.0781 196.828 70.6719C196.828 69.3281 196.453 68.1406 195.703 67.1094C194.953 66.0469 193.844 65.0312 192.375 64.0625C190.938 63.0938 187.984 61.5469 183.516 59.4219C179.328 57.4531 176.188 55.5625 174.094 53.75C172 51.9375 170.328 49.8281 169.078 47.4219C167.828 45.0156 167.203 42.2031 167.203 38.9844C167.203 32.9219 169.25 28.1562 173.344 24.6875C177.469 21.2188 183.156 19.4844 190.406 19.4844C193.969 19.4844 197.359 19.9062 200.578 20.75C203.828 21.5938 207.219 22.7812 210.75 24.3125L206.062 35.6094C202.406 34.1094 199.375 33.0625 196.969 32.4688C194.594 31.875 192.25 31.5781 189.938 31.5781C187.188 31.5781 185.078 32.2188 183.609 33.5C182.141 34.7812 181.406 36.4531 181.406 38.5156C181.406 39.7969 181.703 40.9219 182.297 41.8906C182.891 42.8281 183.828 43.75 185.109 44.6562C186.422 45.5312 189.5 47.125 194.344 49.4375C200.75 52.5 205.141 55.5781 207.516 58.6719C209.891 61.7344 211.078 65.5 211.078 69.9688ZM249.516 50.5156H276.703V86.0469C272.297 87.4844 268.141 88.4844 264.234 89.0469C260.359 89.6406 256.391 89.9375 252.328 89.9375C241.984 89.9375 234.078 86.9062 228.609 80.8438C223.172 74.75 220.453 66.0156 220.453 54.6406C220.453 43.5781 223.609 34.9531 229.922 28.7656C236.266 22.5781 245.047 19.4844 256.266 19.4844C263.297 19.4844 270.078 20.8906 276.609 23.7031L271.781 35.3281C266.781 32.8281 261.578 31.5781 256.172 31.5781C249.891 31.5781 244.859 33.6875 241.078 37.9062C237.297 42.125 235.406 47.7969 235.406 54.9219C235.406 62.3594 236.922 68.0469 239.953 71.9844C243.016 75.8906 247.453 77.8438 253.266 77.8438C256.297 77.8438 259.375 77.5312 262.5 76.9062V62.6094H249.516V50.5156ZM293.062 89V20.4688H307.594V89H293.062Z" fill="white"/>
            <circle cx="49.5" cy="156.5" r="11.5" fill="white"/>
            <path d="M80 113L50 140V158" stroke="white" stroke-width="5"/>
            <circle cx="116.5" cy="79.5" r="11.5" fill="white"/>
            <path d="M117 79L80 112" stroke="white" stroke-width="5"/>
            <circle cx="143.5" cy="156.5" r="11.5" fill="white"/>
            <circle cx="11.5" cy="77.5" r="11.5" fill="white"/>
            <circle cx="68.5" cy="11.5" r="11.5" fill="white"/>
            <path d="M45 78L68 56.0978V14" stroke="white" stroke-width="5"/>
            <circle cx="344.5" cy="107.5" r="11.5" fill="white"/>
            <path d="M116 80L145.976 108H338" stroke="white" stroke-width="5"/>
            <path d="M9 77H43.572L123.088 156H147" stroke="white" stroke-width="5"/>
          </svg> */}
          <Logo />
        </div>
      </Link>
      <div className='user-info'>
        <span className='display-name'>{currentUser ? currentUser.displayName.split(' ')[0] : ''}</span>
        <Link to='/profile'>
          <div
            className="small-avatar"
            style={{
              backgroundImage: `url(${currentUser ? currentUser.photoURL : ''})`
            }}
          > 
            {
              currentUser &&

              !currentUser.photoURL ? 
              <svg width="30" height="30" viewBox="0 0 150 150" fill="none" xmlns="http://www.w3.org/2000/svg">
                <circle cx="75" cy="75" r="75" fill="white"/>
                <path fillRule="evenodd" clipRule="evenodd" d="M15.2212 120.3C17.0003 118.474 19.938 116.707 24.0343 115C24.5105 114.762 28.4242 113.452 35.7754 111.071C43.1265 108.69 46.8914 107.47 47.07 107.411C51.1771 105.923 53.8706 104.777 55.1504 103.973C56.4301 103.17 57.3974 102.054 58.0521 100.625L60.1057 96.3393C60.4033 94.8512 60.0462 93.631 59.0343 92.6786C51.1176 85.5357 47.189 75.8631 47.2486 63.6607C47.2486 53.8393 49.6593 45.7738 54.4807 39.4643C59.3021 33.1548 65.9986 30 74.57 30C83.1414 30 89.8378 33.1548 94.6593 39.4643C99.4807 45.7738 101.891 53.8393 101.891 63.6607C101.951 75.8631 98.0224 85.5357 90.1057 92.6786C89.0938 93.631 88.7367 94.8512 89.0343 96.3393L91.0878 100.625C91.7426 102.054 92.7099 103.17 93.9896 103.973C95.2694 104.777 97.9628 105.923 102.07 107.411C102.249 107.47 106.013 108.69 113.365 111.071C120.716 113.452 124.63 114.762 125.106 115C129.584 116.866 132.678 118.804 134.386 120.813C122.444 136.271 104.6 146.938 84.23 149.438C81.0591 149.792 77.8384 149.982 74.5766 149.999C50.3471 149.865 28.8382 138.242 15.2212 120.3Z" fill="#D81B5D"/>
              </svg>
              :
                ''
            }
          </div>
        </Link>
      </div>
    </div>
    {children}
  </div>
)};

const mapStateToProps = state => ({
  currentUser: state.user.currentUser
})

export default connect(mapStateToProps)(withLoading(Header));